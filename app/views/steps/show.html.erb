<script type="text/javascript" src="https://www.dropbox.com/static/api/1/dropins.js" id="dropboxjs" data-app-key="vsd80hf9vkhb1v2"></script>

<script type="text/javascript">
  $(document).ready(function(){
  })
</script>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '176485969058177',                        // App ID from the app dashboard
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });

    // Additional initialization code such as adding Event Listeners goes here
  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>


<div class="container">
  <input type='hidden' value="<%=@step.id%>" id="step_id">
  <p id="notice"><%= notice %></p>

  <p>
    <strong>Name:</strong>
    <%= @step.name %>
  </p>

  <p>
    <strong>Content:</strong>
    <%= @step.content %>
  </p>

  <p>
    <strong>Project:</strong>
    <%= @step.project_id %>
  </p>

  <%= link_to 'Edit', edit_project_step_path(@project, @step) if can_update?(@step) %> |
  <%= link_to 'Back', project_steps_path(@project) %>
  <h1>
    Add stuff to this step
  </h1>
  <div class='row-fluid'>
    <div class='span6' id='upload-area'>
      <div id="photo-options" class="" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <h3 id="myModalLabel">Add Photos</h3>
        <div id="drop-area"></div>
        <input type="dropbox-chooser" id="db-chooser"  name="selected-file" data-link-type= "direct" data-extensions= "jpg jpeg png" style="visibility: hidden;"/>
        <a class="btn btn-primary" id="fb-photos">Choose from Facebook</a>
      </div>
    </div>
    <div id ='added-photos' class='span6'>
      <ul>
        <% @step.media_objects.each do |media_object| %>
          <li>
            <%= image_tag media_object.url, width: "100px" %>
         </li>
        <% end %>
       </ul>
    </div>
  </div>
  <div class="row-fluid">
      <div id="CSPhotoSelector">
                        <div class="CSPhotoSelector_dialog">
                                <a href="#" id="CSPhotoSelector_buttonClose">x</a>
                                <div class="CSPhotoSelector_form">
                                        <div class="CSPhotoSelector_header">
                                                <p>Choose from Photos</p>
                                        </div>

                                        <div class="CSPhotoSelector_content CSAlbumSelector_wrapper">
                                                <p>Browse your albums until you find a picture you want to use</p>
                                                <div class="CSPhotoSelector_searchContainer CSPhotoSelector_clearfix">
                                                        <div class="CSPhotoSelector_selectedCountContainer">Select an album</div>
                                                </div>
                                                <div class="CSPhotoSelector_photosContainer CSAlbum_container"></div>
                                        </div>

                                        <div class="CSPhotoSelector_content CSPhotoSelector_wrapper">
                                                <p>Select a new photo</p>
                                                <div class="CSPhotoSelector_searchContainer CSPhotoSelector_clearfix">
                                                        <div class="CSPhotoSelector_selectedCountContainer"><span class="CSPhotoSelector_selectedPhotoCount">0</span> / <span class="CSPhotoSelector_selectedPhotoCountMax">0</span> photos selected</div>
                                                        <a href="#" id="CSPhotoSelector_backToAlbums">Back to albums</a>
                                                </div>
                                                <div class="CSPhotoSelector_photosContainer CSPhoto_container"></div>
                                        </div>

                                        <div id="CSPhotoSelector_loader"></div>


                                        <div class="CSPhotoSelector_footer CSPhotoSelector_clearfix">
                                                <a href="#" id="CSPhotoSelector_pagePrev" class="CSPhotoSelector_disabled">Previous</a>
                                                <a href="#" id="CSPhotoSelector_pageNext">Next</a>
                                                <div class="CSPhotoSelector_pageNumberContainer">
                                                        Page <span id="CSPhotoSelector_pageNumber">1</span> / <span id="CSPhotoSelector_pageNumberTotal">1</span>
                                                </div>
                                                <a href="#" id="CSPhotoSelector_buttonOK">OK</a>
                                                <a href="#" id="CSPhotoSelector_buttonCancel">Cancel</a>
                                        </div>
                                </div>
                        </div>
                </div>
  </div>
</div>
